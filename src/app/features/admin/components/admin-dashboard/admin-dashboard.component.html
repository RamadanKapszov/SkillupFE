<div class="admin-dashboard" *ngIf="!loading && !error; else loadingTpl">
  <!-- Summary cards -->
  <section class="summary-grid">
    <div class="summary-card primary">
      <h3>üë• –û–±—â–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</h3>
      <p class="value">{{ summary?.totalUsers || 0 }}</p>
      <p class="hint">
        –°—Ç—É–¥–µ–Ω—Ç–∏: {{ summary?.totalStudents || 0 }} ‚Ä¢ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏:
        {{ summary?.totalTeachers || 0 }}
      </p>
    </div>

    <div class="summary-card">
      <h3>üìö –ö—É—Ä—Å–æ–≤–µ</h3>
      <p class="value">{{ summary?.totalCourses || 0 }}</p>
      <p class="hint">–û–±—â–æ —É—Ä–æ—Ü–∏: {{ summary?.totalLessons || 0 }}</p>
    </div>

    <div class="summary-card">
      <h3>üéì –ó–∞–ø–∏—Å–≤–∞–Ω–∏—è</h3>
      <p class="value">{{ summary?.totalEnrollments || 0 }}</p>
      <p class="hint">
        –¢–µ—Å—Ç–æ–≤–µ: {{ summary?.totalTests || 0 }} ‚Ä¢ –ë–∞–¥–∂–æ–≤–µ:
        {{ summary?.totalBadges || 0 }}
      </p>
    </div>
  </section>

  <!-- Top lists -->
  <section class="panels-grid">
    <!-- Top Courses -->
    <div class="panel">
      <div class="panel-header">
        <h3>üèÜ –¢–æ–ø –∫—É—Ä—Å–æ–≤–µ –ø–æ –∑–∞–ø–∏—Å–≤–∞–Ω–∏—è</h3>
      </div>
      <div *ngIf="topCourses.length; else noCourses">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>–ö—É—Ä—Å</th>
              <th>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª</th>
              <th>–ó–∞–ø–∏—Å–∞–Ω–∏</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let c of topCourses; let i = index">
              <td>{{ i + 1 }}</td>
              <td>
                <a [routerLink]="['/courses', c.id]">{{ c.title }}</a>
              </td>
              <td>{{ c.teacher }}</td>
              <td>{{ c.enrolledCount }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <ng-template #noCourses>
        <p class="empty">–ù—è–º–∞ –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –¥–∞–Ω–Ω–∏ –∑–∞ –∫—É—Ä—Å–æ–≤–µ.</p>
      </ng-template>
    </div>

    <!-- Top Students -->
    <div class="panel">
      <div class="panel-header">
        <h3>üéñÔ∏è –¢–æ–ø —Å—Ç—É–¥–µ–Ω—Ç–∏ –ø–æ —Ç–æ—á–∫–∏</h3>
      </div>
      <div *ngIf="topStudents.length; else noStudents">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</th>
              <th>–ò–º–µ–π–ª</th>
              <th>–¢–æ—á–∫–∏</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let s of topStudents; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ s.username }}</td>
              <td>{{ s.email }}</td>
              <td>{{ s.totalPoints }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <ng-template #noStudents>
        <p class="empty">–ù—è–º–∞ –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –¥–∞–Ω–Ω–∏ –∑–∞ —Å—Ç—É–¥–µ–Ω—Ç–∏.</p>
      </ng-template>
    </div>

    <!-- Top Teachers -->
    <div class="panel">
      <div class="panel-header">
        <h3>üë®‚Äçüè´ –¢–æ–ø –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –ø–æ –±—Ä–æ–π –∫—É—Ä—Å–æ–≤–µ</h3>
      </div>
      <div *ngIf="topTeachers.length; else noTeachers">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª</th>
              <th>–ö—É—Ä—Å–æ–≤–µ</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let t of topTeachers; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ t.username }}</td>
              <td>{{ t.courseCount }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <ng-template #noTeachers>
        <p class="empty">–ù—è–º–∞ –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –¥–∞–Ω–Ω–∏ –∑–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏.</p>
      </ng-template>
    </div>
  </section>
</div>

<ng-template #loadingTpl>
  <div class="loading-wrapper">
    <div class="spinner"></div>
    <p>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∞–¥–º–∏–Ω —Ç–∞–±–ª–æ—Ç–æ...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>‚ùå –í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ. –û–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.</p>
  </div>
</ng-template>
